- id: Стиснення Бази
  alias: 00_purge_everyday
  initial_state: true
  trigger:
    - platform: template
      value_template: '{{now().weekday() == 0 }}'

    # - platform: template
    #   value_template: '{{now().day % 10 == 1 }}'

    # - platform: time
    #   at: '01:00:00'

    # - platform: time_date
    #   at: "3:00:00"
    #   weekday: 
    #     - sun

    # - platform: time_pattern
    # # You can also match on interval. This will match every 5 minutes
    #   minutes: "/1440" # 10 days
  action:
    - service: recorder.purge
      data:
          keep_days: 90
          repack: true

#Today is {% if now().weekday() in (0,) %}Monday{% elif now().weekday() in (1,) %}Tuesday{% elif now().weekday() in (2,) %}Wednesday{% elif now().weekday() in (3,) %}Thursday{% elif now().weekday() in (4,) %}Friday{% elif now().weekday() in (5,) %}Saturday{% elif now().weekday() in (6,)%}Sunday{% endif %}.